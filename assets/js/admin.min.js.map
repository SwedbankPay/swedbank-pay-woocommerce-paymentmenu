{"version":3,"file":"admin.min.js","names":["jQuery","document","ready","$","SwedbankPay_Admin","order_id","val","ajax","url","ajax_url","data","action","nonce","success","response","alert","prop","on","e","preventDefault","this","self","type","beforeSend","html","text_wait","window","location","href"],"sources":["admin.js"],"sourcesContent":["jQuery(document).ready(function ($) {\r\n    // HPOS failback\r\n    if ( ! SwedbankPay_Admin.order_id ) {\r\n        SwedbankPay_Admin.order_id = $( '#post_ID' ).val();\r\n    }\r\n\r\n    $.ajax({\r\n        url: SwedbankPay_Admin.ajax_url,\r\n        data: {\r\n            action: 'swedbank_pay_get_refund_mode',\r\n            nonce: SwedbankPay_Admin.nonce,\r\n            order_id: SwedbankPay_Admin.order_id\r\n        },\r\n        success: function (response) {\r\n            if (!response.success) {\r\n                alert(response.data);\r\n                return false;\r\n            }\r\n\r\n            switch (response.data['mode']) {\r\n                case 'items':\r\n                    $('.refund_line_total.wc_input_price').prop('readonly', true);\r\n                    $('.refund_line_tax.wc_input_price').prop('readonly', true);\r\n                    $('#refund_amount').prop('readonly', true);\r\n\r\n                    break;\r\n                case 'amount':\r\n                    $('#refund_amount').prop('readonly', false);\r\n                    $('.refund_order_item_qty').prop('readonly', true).val(0);\r\n                    $('.refund_line_total.wc_input_price').prop('readonly', true);\r\n                    $('.refund_line_tax.wc_input_price').prop('readonly', true);\r\n                    break;\r\n            }\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '#swedbank_pay_capture', function (e) {\r\n        e.preventDefault();\r\n\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var self = $(this);\r\n        $.ajax({\r\n            url: SwedbankPay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'swedbank_pay_capture',\r\n                nonce: nonce,\r\n                order_id: order_id\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(SwedbankPay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n\r\n                window.location.href = location.href;\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#swedbank_pay_cancel', function (e) {\r\n        e.preventDefault();\r\n\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var self = $(this);\r\n        $.ajax({\r\n            url: SwedbankPay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'swedbank_pay_cancel',\r\n                nonce: nonce,\r\n                order_id: order_id\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(SwedbankPay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n\r\n                window.location.href = location.href;\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#swedbank_pay_refund', function (e) {\r\n        e.preventDefault();\r\n\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var self = $(this);\r\n        $.ajax({\r\n            url: SwedbankPay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'swedbank_pay_refund',\r\n                nonce: nonce,\r\n                order_id: order_id\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(SwedbankPay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n\r\n                window.location.href = location.href;\r\n            }\r\n        });\r\n    });\r\n});\r\n"],"mappings":"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"}