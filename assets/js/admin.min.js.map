{"version":3,"file":"admin.min.js","names":["jQuery","document","ready","$","SwedbankPay_Admin","order_id","val","ajax","url","ajax_url","data","action","nonce","success","response","alert","prop","on","e","preventDefault","this","self","type","beforeSend","html","text_wait","window","location","href"],"sources":["admin.js"],"sourcesContent":["jQuery(document).ready(function ($) {\n    // HPOS failback\n    if ( ! SwedbankPay_Admin.order_id ) {\n        SwedbankPay_Admin.order_id = $( '#post_ID' ).val();\n    }\n\n    $.ajax({\n        url: SwedbankPay_Admin.ajax_url,\n        data: {\n            action: 'swedbank_pay_get_refund_mode',\n            nonce: SwedbankPay_Admin.nonce,\n            order_id: SwedbankPay_Admin.order_id\n        },\n        success: function (response) {\n            if (!response.success) {\n                alert(response.data);\n                return false;\n            }\n\n            switch (response.data['mode']) {\n                case 'items':\n                    $('.refund_line_total.wc_input_price').prop('readonly', true);\n                    $('.refund_line_tax.wc_input_price').prop('readonly', true);\n                    $('#refund_amount').prop('readonly', true);\n\n                    break;\n                case 'amount':\n                    $('#refund_amount').prop('readonly', false);\n                    $('.refund_order_item_qty').prop('readonly', true).val(0);\n                    $('.refund_line_total.wc_input_price').prop('readonly', true);\n                    $('.refund_line_tax.wc_input_price').prop('readonly', true);\n                    break;\n            }\n        }\n    });\n\n    $(document).on('click', '#swedbank_pay_capture', function (e) {\n        e.preventDefault();\n\n        var nonce = $(this).data('nonce');\n        var order_id = $(this).data('order-id');\n        var self = $(this);\n        $.ajax({\n            url: SwedbankPay_Admin.ajax_url,\n            type: 'POST',\n            data: {\n                action: 'swedbank_pay_capture',\n                nonce: nonce,\n                order_id: order_id\n            },\n            beforeSend: function () {\n                self.data('text', self.html());\n                self.html(SwedbankPay_Admin.text_wait);\n                self.prop('disabled', true);\n            },\n            success: function (response) {\n                self.html(self.data('text'));\n                self.prop('disabled', false);\n                if (!response.success) {\n                    alert(response.data);\n                    return false;\n                }\n\n                window.location.href = location.href;\n            }\n        });\n    });\n\n    $(document).on('click', '#swedbank_pay_cancel', function (e) {\n        e.preventDefault();\n\n        var nonce = $(this).data('nonce');\n        var order_id = $(this).data('order-id');\n        var self = $(this);\n        $.ajax({\n            url: SwedbankPay_Admin.ajax_url,\n            type: 'POST',\n            data: {\n                action: 'swedbank_pay_cancel',\n                nonce: nonce,\n                order_id: order_id\n            },\n            beforeSend: function () {\n                self.data('text', self.html());\n                self.html(SwedbankPay_Admin.text_wait);\n                self.prop('disabled', true);\n            },\n            success: function (response) {\n                self.html(self.data('text'));\n                self.prop('disabled', false);\n                if (!response.success) {\n                    alert(response.data);\n                    return false;\n                }\n\n                window.location.href = location.href;\n            }\n        });\n    });\n\n    $(document).on('click', '#swedbank_pay_refund', function (e) {\n        e.preventDefault();\n\n        var nonce = $(this).data('nonce');\n        var order_id = $(this).data('order-id');\n        var self = $(this);\n        $.ajax({\n            url: SwedbankPay_Admin.ajax_url,\n            type: 'POST',\n            data: {\n                action: 'swedbank_pay_refund',\n                nonce: nonce,\n                order_id: order_id\n            },\n            beforeSend: function () {\n                self.data('text', self.html());\n                self.html(SwedbankPay_Admin.text_wait);\n                self.prop('disabled', true);\n            },\n            success: function (response) {\n                self.html(self.data('text'));\n                self.prop('disabled', false);\n                if (!response.success) {\n                    alert(response.data);\n                    return false;\n                }\n\n                window.location.href = location.href;\n            }\n        });\n    });\n});\n"],"mappings":"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"}